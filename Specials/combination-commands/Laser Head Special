/sc
local function laser_head(damage_modifier, shooting_speed)
    for _, force in pairs({"north", "south"}) do
        game.forces[force].set_ammo_damage_modifier("laser", damage_modifier)
        game.forces[force].set_gun_speed_modifier("laser", shooting_speed)
    end
    --[[
    put massage in chat and on chest above spec island
    --]]
    local surface = game.surfaces[storage.bb_surface_name]
    if damage_modifier == 0 then
        damage_modifier = "no change"
    else
        damage_modifier = "+" .. damage_modifier*100 .. "%"
    end
    local texts = {
        "SPECIAL GAME - Laser Head -",
        "laser_speed_modifier = +" .. shooting_speed*100 .. "%",
        "laser_damage_modifier = " .. damage_modifier .. "",
        "-- laser turret is disabled --",
        "Please do not deconstruct entities created by other players",
        "have fun!",
        "",
        }
    local message = ""
    local border = "[font=default-large-bold][color=red]+++++++++++++[/color][/font]"
    game.print(border)
    message2 = texts[1]
    message2 = "[font=default-large-bold][color=yellow]" .. message2 .. "[/color][/font]"
    game.print(message2)
    local message3 = "[font=default-large-bold][color=yellow]Please read description above island[/color][/font]"
    game.print(message3)
    local border2 = "[font=default-large-bold][color=red]++++++++++++[/color][/font]"
    game.print(border2)


    local position = {0, -30}
    local area = {{position[1] - 5, position[2] - 5}, {position[1] + 5, position[2] + 5}}
    local existing_chests = surface.find_entities_filtered{area = area, name = "wooden-chest"}
    if #existing_chests > 0 then
        game.print("special game text above island has been changed")
        existing_chests[1].destroy()
    else
        game.print("please read the rules above island")
    end
    
    local chest = surface.create_entity({name = "wooden-chest", position = {0, -35}})

    chest.destructible = false
    chest.minable_flag = false
    chest.rotatable = false
    chest.operable = false

    for i, text in ipairs(texts) do
        local color = i % 2 == 0 and {255, 255, 0} or {255, 200, 0}
        if i == 4 then
            font = "infinite"
            color = {255, 50, 0}
        else 
            font = "heading-1" 
            color = i % 2 == 0 and {255, 255, 0} or {255, 200, 0}
        end
        rendering.draw_text {
        text = text,
        surface = surface,
        target = { entity = chest, offset = {0, 2 * i} },
        color = color,
        scale = 2.00,
        font = font,
        alignment = "center",
        scale_with_zoom = false
        }
    end
    font = ""
    color = ""
end


local function bb_generate_infinity_chest(item_list)
    --[[
    remove existing infinity chests 
    --]]
    local surface = game.surfaces[storage.bb_surface_name]
    local position_0 = { x = 0, y = -42 }
    local area = {{position_0.x - 20, position_0.y - 5}, {position_0.x + 20, position_0.y - 2*position_0.y +5}}
    local existing_infinity_chest = surface.find_entities_filtered({area = area, name = 'infinity-chest'})
    if #existing_infinity_chest > 0 then
        game.print("special game infinity chests have been changed")
        for _, object in pairs(existing_infinity_chest) do
            object.destroy()
        end
    else
        game.print("special game infinity chests are being created")
    end
    --[[
    generate new infinity chests
    --]]
    local gap = 0
    local k = gap + 1
    for i, v in ipairs(item_list) do
        local chest = surface.create_entity({
            name = 'infinity-chest',
            position = position_0,
            force = 'neutral',
            fast_replace = true,
        })
        if chest == nil then
            return
        end
        chest.minable = false
        chest.operable = false
        chest.destructible = false
        chest.set_infinity_container_filter(i, { name = v, index = i, count = prototypes.item[v].stack_size })
        chest.clone({ position = { position_0.x, -position_0.y } })
        position_0.x = position_0.x + (i * k)
        k = k * -1
    end
end

local item_list = {
    "power-armor-mk2",
    "battery-mk2-equipment",
    "fission-reactor-equipment",
    "personal-laser-defense-equipment",
    }

bb_generate_infinity_chest(item_list)
laser_head(0,1)
--[[disable laser-turret]]
